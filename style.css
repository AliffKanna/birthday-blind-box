/* Import a pixel-style font for the authentic look */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* Universal Reset to eliminate hidden browser margins/padding */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; /* This is crucial for layout stability */
}

:root {
    /* Define main colors based on the design image */
    --color-pink-bg: #ffc0d9; /* Lighter pink for main background */
    --color-dark-pink: #ff69b4;
    --color-outline: #000000; /* Dark color for borders/text outlines */
    --color-box-white: #ffffff;
    --color-red: #2a3597;
}

body {
    text-align: center;
    /* Define the pixel grid pattern using an SVG data URL (2x scaled) */
    background: var(--color-pink-bg) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><rect width="10" height="10" fill="%23ffc0d9"/><rect x="10" y="10" width="10" height="10" fill="%23ffc0d9"/><rect x="10" width="10" height="10" fill="%23f7a6c9"/><rect y="10" width="10" height="10" fill="%23f7a6c9"/></svg>');
    
    /* Use the pixelated font */
    font-family: 'Press Start 2P', cursive, sans-serif; 
    color: var(--color-outline);

    /* --- FLEXBOX CENTERING (Best for mobile alignment) --- */
    display: flex;
    flex-direction: column; 
    align-items: center;    
    /* ----------------------------------------------------- */

    overflow-x: hidden;
    margin: 0;
    padding: 0;
    min-height: 100vh;
}

/* Simulate the chunky pixel text look */
h1 {
    font-size: 2.9em; 
    margin-top: 30px;
    padding: 5px;
    line-height: 1.3; 
    width: 100%; /* Ensures header respects body centering */
}

/* Apply the text shadow to all parts of the header */
h1 span {
    text-shadow: 3px 3px 0 var(--color-outline); 
}

/* Define the new color classes for the header */
h1 .color-1 {
    color: var(--color-dark-pink); /* Pink */
}

h1 .color-2 {
    color: #ffeb3b; /* Yellow */
}

h1 .color-3 {
    color: #4dd0e1; /* Cyan/Blue */
}

p {
    font-size: 0.7em;
    margin-top: 10px;
}

#gift-container {
    /* --- KEY CHANGE: Use row direction for two columns --- */
    display: flex;
    flex-direction: row; 
    /* ----------------------------------------------------- */

    /* Horizontal distance between columns */
    gap: 300px; 
    
    /* Background Image Styling for Mobile Resolution */
    background-image: url('Gemini_Generated_Image_9c1s899c1s899c1s.jpg');
    background-size: cover; /* Cover the container area */
    background-repeat: no-repeat;
    background-position: center;
    border-radius: 12px; /* Give it soft edges */
    padding: 30px; /* Padding inside the container to frame the boxes */
    
    /* ADJUSTED WIDTH for the wider layout and smaller boxes */
    width: 300px; 
    min-height: 550px; 
    
    /* Centering Fix: Use full width and rely on align-items */
    margin: 40px 0; 
    
    perspective: 1000px;
    /* Reduced shift to visually center the smaller, wider two-column structure */
    transform: translateY(-10vh) translateX(-25vw); 
    z-index: 7000;
}

/* --- New Column Containers --- */
#left-column, #right-column {
    display: flex;
    flex-direction: column; /* Stack the boxes vertically inside each column */
    align-items: center;
    /* Vertical distance between boxes */
    gap: 200px; 
}

/* Style the flip container */
.gift-box {
    width: 70px; /* Reduced base size for smaller gift box */
    height: 70px; /* Reduced base size for smaller gift box */
    cursor: pointer;
    position: relative; /* Changed to relative for child positioning */
    transform-style: preserve-3d;
    margin-bottom: 0; 
    transition: transform 0.3s ease-out; /* Added transition for hover */
    z-index: 8000;
}

.gift-box:hover {
    transform: translateY(-5px); /* Reduced lift for smaller box */
}

.gift-box.flipped {
    transform: none;
    /* ⭐️ CRITICAL FIX: Neutralize the 3D context by setting transform-style to flat */
    transform-style: flat; 
    z-index: 6000 !important; 
}

/* Base style for both front and back faces */
.gift-box .front,
.gift-box .back {
    position: absolute;
    width: 100%; /* Set to 100% to match new .gift-box size */
    height: 100%;
    
    border: 0px solid var(--color-outline); 
    border-radius: 8px;
    box-shadow: none; 
    
    backface-visibility: hidden;
    box-sizing: border-box;
    position: absolute;
    transition: transform 0.5s; /* Transition for rotation */
}

/* Flip the front face out of view */
.gift-box.flipped .front {
    transform: rotateY(180deg);
}

/* Flip the back face into view */
.gift-box.flipped .back {
    transform: rotateY(0deg); 
}

/* FRONT FACE (Where the custom image goes) */
.gift-box .front {
    background: none;
    display: block;
    padding: 0px;
}

/* Style for the small gift icon image */
.gift-icon-img {
    width: 100%; 
    height: 100%;
    object-fit: contain; 
    image-rendering: pixelated; 
}

/* BACK FACE (Surprise content) */
.gift-box .back {
    background: none; 
    color: var(--color-outline);
    transform: rotateY(180deg); /* Start hidden */

    display: flex; 
    justify-content: center; /* Centers horizontally */
    align-items: center; /* Centers vertically */
    flex-direction: column;
    z-index: 6100; 
}

.surprise-content {
    text-align: center;
    padding: 5px;
    width: 100%; 
    
    /* --- CRITICAL: Add transition for shrink/enlarge effect --- */
    transition: transform 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Bounce effect for enlarge/shrink */
    /* --------------------------------------------------------- */
}

/* Base style for the flipped box: Perfect Centering & Scaling */
.gift-box.flipped .surprise-content {
    /* --- BASE FIX: Perfect centering of the scaled element on the screen --- */
    position: fixed; 
    top: 50%;
    left: 50%; 
    
    /* Apply large scale directly to the surprise content */
    transform: translate(-50%, -50%) scale(4.0); 
    
    /* Ensure content is centered inside the scaled box */
    display: flex;
    flex-direction: column;
    justify-content: center; /* Vertical center inside the scaled box */
    align-items: center; /* Horizontal center inside the scaled box */
    gap: 10px;
    
    /* Optional: Modal appearance */
    background-color: var(--color-box-white);
    border: 4px solid var(--color-outline);
    border-radius: 8px;
    padding: 15px; 
    overflow-y: auto;
    
    /* ⭐️ CRITICAL FIX: Highest Z-index to be in front of confetti and overlay */
    z-index: 8000; 
}

/* --- Removed box-specific vertical translations for perfect centering --- */

/* Styling for the surprise images on the back (Snoopy GIF, Lilies, etc.) */
.surprise-img {
    max-width: 90%;
    height: auto; 
    object-fit: contain;
    image-rendering: pixelated;
     
}

/* ⭐️ NEW BLOCK: Reveal Overlay Style */
#reveal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Dark background with low opacity */
    background: rgba(0, 0, 0, 0.5); 
    /* Set Z-index below the content and confetti */
    z-index: 3000; 
    /* Start hidden */
    opacity: 0; 
    pointer-events: none; /* Allows clicks to pass through when hidden */
    transition: opacity 0.5s ease-in-out; 
}

/* State when the overlay is active */
#reveal-overlay.active {
    opacity: 1;
}

/* Canvas for confetti */
#confetti {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    /* ⭐️ CRITICAL FIX: Set Z-index between content and overlay */
    z-index: 3100;
}

/* Stars and Hearts Decoration */
.decoration {
    position: absolute;
    font-size: 30px;
    z-index: -1;
    color: var(--color-dark-pink);
    text-shadow: 2px 2px 0 var(--color-outline);
}
.star-1 { top: 5%; left: 10%; transform: rotate(-15deg); }
.star-2 { bottom: 15%; right: 5%; transform: rotate(20deg); }
.heart-1 { top: 20%; right: 10%; color: red; }
.heart-2 { bottom: 5%; left: 20%; transform: scale(1.5); color: #ffeb3b; }

/* --- ANIMATION CONTROL STYLES --- */

/* --- SECONDARY GIFT MODAL STYLES (Repurposed for simple prompt) --- */

/* 1. Overlay (Covers the whole screen, Z-index is higher than confetti) */
#secondary-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6); 
    /* Set this higher than all reveal elements */
    z-index: 8100; 
    display: none; 
    align-items: center;
    justify-content: center;
}

/* 2. The Pop-up Gift Box Container */
#secondary-gift-box {
    width: 350px; 
    height: 200px; 
    
    background: none; 
    border: none;
    box-shadow: none; 

    transform: translateY(100px) scale(0.5);
    opacity: 0;
    /* ADD TRANSITION for smooth size change */
    transition: all 1s ease-out; /* Apply transition to handle size changes between stages */
    cursor: auto; 
    position: relative;
}

/* State when the modal is active/visible */
#secondary-modal-overlay.active #secondary-gift-box {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* Inner content wrapper (Now handles two separate stages inside) */
.modal-content {
    height: 100%; 
    width: 100%;
    position: relative;
    
    /* Flex parent setup for inner stages */
    display: flex;
    flex-direction: column;
    
    /* Styling the box itself */
    background-color: var(--color-box-white); 
    border: 4px solid var(--color-outline); 
    border-radius: 8px;
    padding: 20px;
    box-sizing: border-box;
}

/* --- New Prompt Button Styles --- */
.prompt-button {
    font-family: 'Press Start 2P', cursive;
    font-size: 0.7em;
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
    color: var(--color-box-white);
    background-color: var(--color-dark-pink);
    border: 3px solid var(--color-outline);
    border-radius: 6px;
    box-shadow: 4px 4px 0px var(--color-outline);
    transition: all 0.1s ease-in-out;
    line-height: 1;
}

.prompt-button:hover {
    box-shadow: 2px 2px 0px var(--color-outline);
    transform: translate(2px, 2px);
}

.prompt-button:active {
    box-shadow: none;
    transform: translate(4px, 4px);
}
/* --- FINAL THANK YOU SCREEN STYLES --- */

#final-thankyou-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9000; 
    
    /* Initially hidden */
    display: none; 
    
    /* Center the text */
    justify-content: center;
    align-items: center;
    
    /* Add a subtle transition for appearance */
    opacity: 0;
    transition: opacity 1s ease-in;
    
    /* ⭐️ CRITICAL FIX: Ensure it doesn't block clicks when hidden ⭐️ */
    pointer-events: none;

    /* ⭐️ BACKGROUND IMAGE SETTINGS ⭐️ */
    background-image: url('ending.jpg'); /* 1. Specify the path to your image file */
    background-size: cover;          /* 2. Scale the image to cover the entire container */
    background-position: center;     /* 3. Center the image */
    background-repeat: no-repeat;    /* 4. Prevent the image from repeating */
    /* ---------------------------------- */
}

#final-thankyou-screen.active {
    /* ⭐️ CRITICAL FIX: Re-enable clicks when active/visible ⭐️ */
    pointer-events: auto;
    display: flex; /* We set display: flex here, not in the initial state */
    opacity: 1;
}

#thankyou-content {
    /* CRITICAL: Use Flexbox to stack the image and text vertically */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center items horizontally within the content box */
}

#thankyou-content p {
    font-family: 'Press Start 2P', cursive;
    font-size: 2.5em; /* Large, bold text */
    color: var(--color-outline); /* White text */
    text-shadow: 3px 3px 0 var(--color-box-white); /* Pixel-style outline */
    text-align: center;
    margin-bottom: 400px;
}

/* Mobile Styles */
@media (max-width: 600px) {
    body {
        font-size: 0.8em; /* Adjust font size for mobile */
    }

    /* General gift container adjustment for stacking on mobile */
    #gift-container {

        gap: 10px; /* Reduce gap between boxes */
        padding: 5px; /* Add padding for mobile */
        width: 90%; /* General container width */
        min-height: 100px; 
        margin: 40px auto; 
        transform: none; 
    }
    
    #left-column, #right-column {
        gap: 10px; /* Reduce vertical gap between stacked boxes */
    }

    /* Box size adjustment for mobile */
    .gift-box {
        width: 160px; /* Consistent with new desktop size */
        height: 160px; 
        margin: 10px auto; 
    }

    #secondary-gift-box {
        width: 100%; /* Full width on mobile */
        height: auto; /* Allow height to adjust */
    }
    
    /* Reduce the scale of the flipped content on mobile */
    .gift-box.flipped .surprise-content {
        transform: translate(-50%, -50%) scale(1.5) !important; 
        padding: 10px;
        max-width: 80%;
    }

    h1 {
        font-size: 1.5em; /* Smaller font size */
    }

    p {
        font-size: 0.8em; /* Smaller text */
    }

    .prompt-button {
        font-size: 0.6em; /* Smaller button text on mobile */
        padding: 8px 12px; /* Smaller padding */
    }
}